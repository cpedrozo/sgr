<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="03_subr_detalle_registro" language="groovy" pageWidth="481" pageHeight="566" columnWidth="481" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="f13fe7bc-38af-4e72-a6d8-1e26f304bc5b">
	<property name="ireport.zoom" value="4.594972986357246"/>
	<property name="ireport.x" value="1262"/>
	<property name="ireport.y" value="0"/>
	<parameter name="id_registro" class="java.lang.Long"/>
	<queryString>
		<![CDATA[SELECT id_estado_actual,
            to_char(fecha::TIMESTAMP, 'DD/MM/YYYY HH24:MI:SS') fecha,
            e.nombre estado,
            ea.get_usuario, COALESCE(CAST(ea.observacion AS TEXT)||'', 'Sin novedades') observacion,
            COALESCE(CAST(p.legajo AS TEXT)||': ', '')||COALESCE(CAST(p.apellido||' '||p.nombre AS TEXT)||'', ' ') apynom
            FROM sgr.estado_actual_flujo ea
            JOIN sgr.estado e ON ea.id_estado = e.id_estado
            LEFT JOIN sgr.persona p ON ea.id_persona = p.id_persona
            WHERE id_registro = 1
            ORDER BY fecha ASC]]>
	</queryString>
	<field name="id_estado_actual" class="java.lang.Long"/>
	<field name="fecha" class="java.lang.String"/>
	<field name="estado" class="java.lang.String"/>
	<field name="get_usuario" class="java.lang.String">
		<fieldDescription><![CDATA[toma del framework]]></fieldDescription>
	</field>
	<field name="observacion" class="java.lang.String"/>
	<field name="apynom" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="67" splitType="Stretch">
			<staticText>
				<reportElement x="4" y="3" width="35" height="12" uuid="e5aa971e-15bb-4249-a8d7-fa98de0ab789"/>
				<textElement verticalAlignment="Bottom">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha:]]></text>
			</staticText>
			<textField>
				<reportElement x="40" y="3" width="110" height="12" uuid="0c61d4a3-7d1e-46d8-9d91-6823e70b7c4e"/>
				<textElement verticalAlignment="Bottom">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="4" y="18" width="42" height="12" uuid="53c83e19-d970-4fd9-be73-90fb5d1b4e67"/>
				<textElement verticalAlignment="Bottom">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Estado:]]></text>
			</staticText>
			<staticText>
				<reportElement x="164" y="18" width="72" height="12" uuid="5b858fbd-4d2a-4096-9590-ece15aec3033"/>
				<textElement verticalAlignment="Bottom">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Persona:]]></text>
			</staticText>
			<textField>
				<reportElement x="208" y="18" width="201" height="12" uuid="1b4fd350-30e5-4f90-a226-679b7a74ba60"/>
				<textElement verticalAlignment="Bottom">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{apynom}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="4" y="64" width="467" height="1" forecolor="#BFE1FF" uuid="086d4ffc-6afe-4174-9388-c6fa5f530fb2"/>
			</line>
			<staticText>
				<reportElement x="4" y="33" width="100" height="12" uuid="d85d62f7-2351-41d5-b21d-bed8ffad74e9"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[ObservaciÃ³n:]]></text>
			</staticText>
			<textField>
				<reportElement x="4" y="34" width="411" height="27" uuid="bc248b21-3ecd-4618-bee6-11aa81175969"/>
				<textElement verticalAlignment="Top">
					<font size="9" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["                           "+$F{observacion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="44" y="18" width="110" height="12" uuid="2a877081-2590-49f8-85e4-2d265240b96e"/>
				<textElement verticalAlignment="Bottom">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{estado}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="164" y="3" width="72" height="12" uuid="c15eed4d-e2d7-4ee1-a770-de8a7215d7dd"/>
				<textElement verticalAlignment="Bottom">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Usuario:]]></text>
			</staticText>
			<textField>
				<reportElement x="208" y="3" width="201" height="12" uuid="9c3f777f-6b42-4435-bab1-d6aefbd89de4"/>
				<textElement verticalAlignment="Bottom">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{get_usuario}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
